<!DOCTYPE html>
<html lang="zh-CN">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Yellow Stone">
<meta name="description" content="本来打算把在毕设过程中零零碎碎学到或者用到的东西记录下来，没想到还是太懒，到最后就忘记要写什么了。由于在毕设论文中用到了流程图，就在网上找了找用 LaTeX 画流程图的方法，这里简单分享下。">

<meta property="og:title" content="利用 TikZ 宏包在 LaTeX 中绘制流程图" />
<meta property="og:description" content="本来打算把在毕设过程中零零碎碎学到或者用到的东西记录下来，没想到还是太懒，到最后就忘记要写什么了。由于在毕设论文中用到了流程图，就在网上找了找用 LaTeX 画流程图的方法，这里简单分享下。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yzlnew.github.io/blog/2016-06-22-flowchart/" /><meta property="article:published_time" content="2016-06-22T09:37:35&#43;00:00"/>
<meta property="article:modified_time" content="2016-06-22T09:37:35&#43;00:00"/>


<title>


     利用 TikZ 宏包在 LaTeX 中绘制流程图 

</title>
<link rel="canonical" href="https://yzlnew.github.io/blog/2016-06-22-flowchart/">










<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://yzlnew.github.io/css/reset.css?t=2019-02-18%2004%3a03%3a43.462554838%20%2b0000%20UTC%20m%3d%2b0.055428630">
    <link rel="stylesheet" href="https://yzlnew.github.io/css/pygments.css?t=2019-02-18%2004%3a03%3a43.462554838%20%2b0000%20UTC%20m%3d%2b0.055428630">
    <link rel="stylesheet" href="https://yzlnew.github.io/css/main.css?t=2019-02-18%2004%3a03%3a43.462554838%20%2b0000%20UTC%20m%3d%2b0.055428630">
    
        <link rel="stylesheet" href="https://yzlnew.github.io/css/override.css?t=2019-02-18%2004%3a03%3a43.462554838%20%2b0000%20UTC%20m%3d%2b0.055428630">
    




<link rel="shortcut icon"

    href="https://yzlnew.github.io/img/favicon.ico"

>








</head>


<body lang="cn">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                
                <a href="https://yzlnew.github.io/"><img class="avatar" src="https://yzlnew.github.io/img/penrose.webp" srcset="https://yzlnew.github.io/img/penrose.webp 1x"></a>
            
            <a href="https://yzlnew.github.io/"><div class="name">Yellow Stone</div></a>
            
              <h3 class="self-intro">A Place of My Own</h3>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://yzlnew.github.io/blog"><span>Blog</span></a></li>
                    
                        <li class="nav-about"><a href="https://yzlnew.github.io/about"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/yzlnew" target="_blank" rel="noopener"><img class="icon" src="https://yzlnew.github.io/img/github.svg" alt="github" /></a>
        

        

        

	

        

        

        

        

        
            <a href="//t.me/r0brew" target="_blank" rel="noopener"><img class="icon" src="https://yzlnew.github.io/img/telegram.svg" alt="telegram" /></a>
        

        

        

        

        
            <a href="mailto:yzlnew@gmail.com"><img class="icon" src="https://yzlnew.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    利用 TikZ 宏包在 LaTeX 中绘制流程图

</div>

                    <div class="initials"><a href="https://yzlnew.github.io/"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Wed Jun 22 2016 09:37:35 UTC'>Jun 22, 2016</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>2 分钟阅读时间</div>
                    
                </div>
            </div>
            <div class="markdown">
                <p>本来打算把在毕设过程中零零碎碎学到或者用到的东西记录下来，没想到还是太懒，到最后就忘记要写什么了。由于在毕设论文中用到了流程图，就在网上找了找用 LaTeX 画流程图的方法，这里简单分享下。</p>

<h3 id="来源">来源</h3>

<p><a href="http://www.texample.net/">TeXample</a> 上给出了两种流程图的画法：</p>

<ul>
<li><a href="http://www.texample.net/tikz/examples/flexible-flow-chart/">Easy-maintenance flowchart</a></li>
<li><a href="http://www.texample.net/tikz/examples/simple-flow-chart/">Simple flow chart</a></li>
</ul>

<p>第一种比较好看，也比较容易维护，当然是用它了。</p>

<h3 id="所需宏包">所需宏包</h3>

<p>在导言区加入以下代码：</p>
<div class="highlight"><pre class="chroma"><code class="language-tex" data-lang="tex"><span class="k">\usepackage</span><span class="nb">{</span>tikz<span class="nb">}</span>
<span class="k">\usetikzlibrary</span><span class="nb">{</span>shapes,arrows,chains<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>xcolor<span class="nb">}</span></code></pre></div>
<h3 id="最终效果和代码">最终效果和代码</h3>

<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fytoxi0567j30ha0kt0u0.jpg" alt="flowchart" /></p>
<div class="highlight"><pre class="chroma"><code class="language-tex" data-lang="tex"><span class="c">% 设置颜色代号
</span><span class="c"></span><span class="k">\colorlet</span><span class="nb">{</span>lcfree<span class="nb">}{</span>green<span class="nb">}</span>
<span class="k">\colorlet</span><span class="nb">{</span>lcnorm<span class="nb">}{</span>blue<span class="nb">}</span>
<span class="k">\colorlet</span><span class="nb">{</span>lccong<span class="nb">}{</span>red<span class="nb">}</span>
<span class="c">% -------------------------------------------------
</span><span class="c">% 设置调试标志层
</span><span class="c"></span><span class="k">\pgfdeclarelayer</span><span class="nb">{</span>marx<span class="nb">}</span>
<span class="k">\pgfsetlayers</span><span class="nb">{</span>main,marx<span class="nb">}</span>
<span class="c">% 标记坐标点的宏定义。交换下面两个定义关闭。
</span><span class="c"></span><span class="k">\providecommand</span><span class="nb">{</span><span class="k">\cmark</span><span class="nb">}</span>[2][]<span class="nb">{</span><span class="c">%
</span><span class="c"></span>  <span class="k">\begin</span><span class="nb">{</span>pgfonlayer<span class="nb">}{</span>marx<span class="nb">}</span>
    <span class="k">\node</span> [nmark] at (c#2#1) <span class="nb">{</span>#2<span class="nb">}</span>;
  <span class="k">\end</span><span class="nb">{</span>pgfonlayer<span class="nb">}{</span>marx<span class="nb">}</span>
  <span class="nb">}</span>
<span class="k">\providecommand</span><span class="nb">{</span><span class="k">\cmark</span><span class="nb">}</span>[2][]<span class="nb">{</span><span class="k">\relax</span><span class="nb">}</span>
<span class="c">% -------------------------------------------------
</span><span class="c">% 开始绘图
</span><span class="c"></span><span class="k">\begin</span><span class="nb">{</span>figure<span class="nb">}</span>[H]
  <span class="k">\centering</span>
  <span class="k">\scalebox</span><span class="nb">{</span>.8<span class="nb">}{</span>  <span class="c">%设置缩放
</span><span class="c"></span><span class="k">\begin</span><span class="nb">{</span>tikzpicture<span class="nb">}</span>[
    &gt;=triangle 60,              <span class="c">% 箭头的形状
</span><span class="c"></span>    start chain=going below,    <span class="c">% 从上往下的流程
</span><span class="c"></span>    node distance=6mm and 60mm, <span class="c">% 全局间距设置
</span><span class="c"></span>    every join/.style=<span class="nb">{</span>norm<span class="nb">}</span>,   <span class="c">% 连接线的默认设置
</span><span class="c"></span>    ]
<span class="c">% -------------------------------------------------
</span><span class="c">% 节点的样式定义
</span><span class="c">% &lt;on chain&gt; 和 &lt;on grid&gt; 可以减少手动调整节点位置的麻烦
</span><span class="c"></span><span class="k">\tikzset</span><span class="nb">{</span>
  base/.style=<span class="nb">{</span>draw, on chain, on grid, align=center, minimum height=4ex<span class="nb">}</span>,
  proc/.style=<span class="nb">{</span>base, rectangle, text width=8em<span class="nb">}</span>,
  test/.style=<span class="nb">{</span>base, diamond, aspect=2, text width=5em<span class="nb">}</span>,
  term/.style=<span class="nb">{</span>proc, rounded corners<span class="nb">}</span>,
  <span class="c">% coord 用来表示连接线的转折点
</span><span class="c"></span>  coord/.style=<span class="nb">{</span>coordinate, on chain, on grid, node distance=6mm and 25mm<span class="nb">}</span>,
  <span class="c">% nmark 用来表示调试标志
</span><span class="c"></span>  nmark/.style=<span class="nb">{</span>draw, cyan, circle, font=<span class="nb">{</span><span class="k">\sffamily\bfseries</span><span class="nb">}}</span>,
  <span class="c">% -------------------------------------------------
</span><span class="c"></span>  <span class="c">% 不同的连接线样式
</span><span class="c"></span>  norm/.style=<span class="nb">{</span>-&gt;, draw, lcnorm<span class="nb">}</span>,
  free/.style=<span class="nb">{</span>-&gt;, draw, lcfree<span class="nb">}</span>,
  cong/.style=<span class="nb">{</span>-&gt;, draw, lccong<span class="nb">}</span>,
  it/.style=<span class="nb">{</span>font=<span class="nb">{</span><span class="k">\small\itshape</span><span class="nb">}}</span>
<span class="nb">}</span>
<span class="c">% -------------------------------------------------
</span><span class="c">% 先放节点
</span><span class="c"></span><span class="k">\node</span> [term, densely dotted,fill=lccong!25, it] (p0) <span class="nb">{</span>输入<span class="nb">}</span>;
<span class="c">% 用 join 表示和上一个节点相连
</span><span class="c"></span><span class="k">\node</span> [proc, join]  <span class="nb">{</span>使用非线性最小二乘法得到 <span class="s">$</span><span class="nb">X_</span><span class="m">0</span><span class="s">$</span><span class="nb">}</span>;
<span class="k">\node</span> [proc, join]  <span class="nb">{</span>记录 <span class="s">$</span><span class="nb">X</span><span class="o">=</span><span class="nb">X_</span><span class="m">0</span><span class="nb">, f</span><span class="o">=</span><span class="nb">f</span><span class="o">(</span><span class="nb">X_</span><span class="m">0</span><span class="o">)</span><span class="s">$</span><span class="nb">}</span>;
<span class="k">\node</span> [test, join] (t1) <span class="nb">{</span><span class="s">$</span><span class="nb">T&gt;T_E</span><span class="s">$</span>?<span class="nb">}</span>;
<span class="k">\node</span> [proc] (p1)   <span class="nb">{</span><span class="s">$</span><span class="nb">step</span><span class="o">=</span><span class="m">0</span><span class="s">$</span><span class="nb">}</span>;
<span class="k">\node</span> [test, join] (t2) <span class="nb">{</span><span class="s">$</span><span class="nb">step&lt;count</span><span class="s">$</span>?<span class="nb">}</span>;
<span class="k">\node</span> [proc] (p2)   <span class="nb">{</span>得到新状态<span class="s">$</span><span class="nb">P_N</span><span class="o">=</span><span class="nb">P</span><span class="o">+</span><span class="nb">scale</span><span class="nv">\times</span><span class="nb"> rand</span><span class="s">$</span>,计算目标函数差<span class="s">$</span><span class="nv">\Delta</span><span class="nb"> f</span><span class="s">$</span><span class="nb">}</span>;
<span class="k">\node</span> [test, join] (t3) <span class="nb">{</span><span class="s">$</span><span class="nb">F_{Accept}&lt;rand</span><span class="s">$</span>?<span class="nb">}</span>;
<span class="k">\node</span> [proc] (p3)   <span class="nb">{</span>记录新状态 <span class="s">$</span><span class="nb">X</span><span class="o">=</span><span class="nb">X_N,f</span><span class="o">=</span><span class="nb">f</span><span class="o">(</span><span class="nb">X_N</span><span class="o">)</span><span class="s">$</span><span class="nb">}</span>;

<span class="k">\node</span> [proc, left=of t1] (p4) <span class="nb">{</span><span class="s">$</span><span class="nb">T</span><span class="o">=</span><span class="nb">T</span><span class="nv">\times</span><span class="nb"> a,scale</span><span class="o">=</span><span class="nb">scale</span><span class="nv">\times</span><span class="nb"> b</span><span class="s">$</span><span class="nb">}</span>;
<span class="k">\node</span> [term, densely dotted, right=of t1,fill=lcfree!25](p5)  <span class="nb">{</span>输出<span class="nb">}</span>;
<span class="k">\node</span> [proc, right=of t3](p6) <span class="nb">{</span><span class="s">$</span><span class="nb">step</span><span class="o">++</span><span class="s">$</span><span class="nb">}</span>;

<span class="k">\node</span> [coord, left=of t2] (c1)  <span class="nb">{}</span>;
<span class="k">\node</span> [coord, right=of t2] (c2)  <span class="nb">{}</span>;
<span class="k">\node</span> [coord, right=of p3] (c3)  <span class="nb">{}</span>;
<span class="c">%先画南北方向的连接线，先画线再画两端的标志和箭头
</span><span class="c"></span><span class="k">\path</span> (t1.south) to node [near start, xshift=1em] <span class="nb">{</span><span class="s">$</span><span class="nb">y</span><span class="s">$</span><span class="nb">}</span> (p1);
  <span class="k">\draw</span> [*-&gt;,lcnorm] (t1.south) -- (p1);
<span class="k">\path</span> (t2.south) to node [near start, xshift=1em] <span class="nb">{</span><span class="s">$</span><span class="nb">y</span><span class="s">$</span><span class="nb">}</span> (p2);
  <span class="k">\draw</span> [*-&gt;,lcnorm] (t2.south) -- (p2);
<span class="k">\path</span> (t3.south) to node [near start, xshift=1em] <span class="nb">{</span><span class="s">$</span><span class="nb">y</span><span class="s">$</span><span class="nb">}</span> (p3);
  <span class="k">\draw</span> [*-&gt;,lcnorm] (t3.south) -- (p3);
<span class="c">%接着画东西方向的连接线，方法同上
</span><span class="c"></span><span class="k">\path</span> (t1.east) to node [near start, yshift=1em]  <span class="nb">{</span><span class="s">$</span><span class="nb">n</span><span class="s">$</span><span class="nb">}</span>(p5);
  <span class="k">\draw</span> [o-&gt;,lcnorm] (t1.east) -- (p5);
  <span class="k">\draw</span> [-&gt;,lcnorm] (p4.east) -- (t1);
<span class="k">\path</span> (t3.east) to node [near start, yshift=1em]  <span class="nb">{</span><span class="s">$</span><span class="nb">n</span><span class="s">$</span><span class="nb">}</span>(p6);
  <span class="k">\draw</span> [o-&gt;,lcnorm] (t3.east) -- (p6);
<span class="k">\path</span> (t2.west) to node [near start, yshift=1em]  <span class="nb">{</span><span class="s">$</span><span class="nb">n</span><span class="s">$</span><span class="nb">}</span>(c1);
  <span class="k">\draw</span> [o-&gt;,lcnorm] (t2.west) -- (c1) -| (p4);
  <span class="k">\draw</span> [-&gt;,lcnorm] (p3.east) -- (c3) -| (p6.south);
  <span class="k">\draw</span> [&lt;-,lcnorm] (t2.east) -- (c2) -| (p6.north);
  <span class="k">\end</span><span class="nb">{</span>tikzpicture<span class="nb">}</span>
<span class="nb">}</span>
<span class="k">\label</span><span class="nb">{</span>fig:algorithm<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>figure<span class="nb">}</span></code></pre></div>
                <br>
                
                <p class="back-to-posts"><a href="https://yzlnew.github.io/blog">回退</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-61197619-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>









</body>
</html>

