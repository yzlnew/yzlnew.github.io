<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content=True><meta name=MobileOptimized content=320><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content=no-referrer><meta name=author content="Yellow Stone"><meta name=description content='在使用 Vim 的过程中有一点一直很头疼，就是总是要在正常和插入模式下切换输入法，因 为大多时候是不会注意自己现在是中文还是英文的输入法。
需求：在正常模式下，切换到英文；在插入模式下，切换到上一次的输入法。  直接上到目前为止（2019-01）的最佳实践，不写调研的过程了。( 更新 ：现在不是了)
Terminal Vim on Mac  安装 fcitx-remote-for-osx 。提供一个 fcitx-remote 可以通过命令行切换输入法的指令。 安装 fcitx-vim-osx 这个 Vim 插件。  注意由于插件中用到 `InsertLeave` 动作，不支持 `CTRL-C` 退出插入模式。  VScode with Vim mode VScode 的 Vim 模式虽然实际效果一般，但是给了比较好的输入法切换的解决方法。
 同样安装 im-select 这个命令行工具。 再在配置文件中加上如下设定：
{ "vim.autoSwitchInputMethod.obtainIMCmd": "/usr/local/bin/im-select", "vim.autoSwitchInputMethod.switchIMCmd": "/usr/local/bin/im-select {im}", "vim.autoSwitchInputMethod.defaultIM": "com.apple.keylayout.US", "vim.autoSwitchInputMethod.enable": true, }  更新 在 MacOS 用以上方法会导致 vimwiki 每换行都切换输入法，几乎不可用。
如果仅仅在 MacOS 使用，建议使用 coc-imselect。'><meta property=og:title content="实现在 Vim 的正常和插入模式下中英文输入法的自动切换"><meta property=og:description content='在使用 Vim 的过程中有一点一直很头疼，就是总是要在正常和插入模式下切换输入法，因 为大多时候是不会注意自己现在是中文还是英文的输入法。
需求：在正常模式下，切换到英文；在插入模式下，切换到上一次的输入法。  直接上到目前为止（2019-01）的最佳实践，不写调研的过程了。( 更新 ：现在不是了)
Terminal Vim on Mac  安装 fcitx-remote-for-osx 。提供一个 fcitx-remote 可以通过命令行切换输入法的指令。 安装 fcitx-vim-osx 这个 Vim 插件。  注意由于插件中用到 `InsertLeave` 动作，不支持 `CTRL-C` 退出插入模式。  VScode with Vim mode VScode 的 Vim 模式虽然实际效果一般，但是给了比较好的输入法切换的解决方法。
 同样安装 im-select 这个命令行工具。 再在配置文件中加上如下设定：
{ "vim.autoSwitchInputMethod.obtainIMCmd": "/usr/local/bin/im-select", "vim.autoSwitchInputMethod.switchIMCmd": "/usr/local/bin/im-select {im}", "vim.autoSwitchInputMethod.defaultIM": "com.apple.keylayout.US", "vim.autoSwitchInputMethod.enable": true, }  更新 在 MacOS 用以上方法会导致 vimwiki 每换行都切换输入法，几乎不可用。
如果仅仅在 MacOS 使用，建议使用 coc-imselect。'><meta property=og:type content=article><meta property=og:url content=https://yzlnew.github.io/blog/%E5%AE%9E%E7%8E%B0%E5%9C%A8-vim-%E7%9A%84%E6%AD%A3%E5%B8%B8%E5%92%8C%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F%E4%B8%8B%E4%B8%AD%E8%8B%B1%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E7%9A%84%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2/><meta property=article:published_time content=2019-01-21T21:53:58+08:00><meta property=article:modified_time content=2019-01-21T21:53:58+08:00><title>实现在 Vim 的正常和插入模式下中英文输入法的自动切换</title><link rel=canonical href=https://yzlnew.github.io/blog/%E5%AE%9E%E7%8E%B0%E5%9C%A8-vim-%E7%9A%84%E6%AD%A3%E5%B8%B8%E5%92%8C%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F%E4%B8%8B%E4%B8%AD%E8%8B%B1%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E7%9A%84%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2/><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500"><link rel=stylesheet href="https://yzlnew.github.io/css/reset.css?t=2019-10-19%2008%3a34%3a40.992040012%20%2b0000%20UTC%20m%3d%2b0.050616443"><link rel=stylesheet href="https://yzlnew.github.io/css/pygments.css?t=2019-10-19%2008%3a34%3a40.992040012%20%2b0000%20UTC%20m%3d%2b0.050616443"><link rel=stylesheet href="https://yzlnew.github.io/css/main.css?t=2019-10-19%2008%3a34%3a40.992040012%20%2b0000%20UTC%20m%3d%2b0.050616443"><link rel=stylesheet href="https://yzlnew.github.io/css/override.css?t=2019-10-19%2008%3a34%3a40.992040012%20%2b0000%20UTC%20m%3d%2b0.050616443"><link rel="shortcut icon" href=https://yzlnew.github.io/img/favicon.ico></head><body lang=cn><section class=header><div class=container><div class=content><a href=https://yzlnew.github.io/><img class=avatar src=https://yzlnew.github.io/img/penrose.webp srcset="https://yzlnew.github.io/img/penrose.webp 1x"></a>
<a href=https://yzlnew.github.io/><div class=name>Yellow Stone</div></a><h3 class=self-intro>A Place of My Own</h3><nav><ul><li class=nav-blog><a href=https://yzlnew.github.io/blog><span>Blog</span></a></li><li class=nav-life><a href=https://yzlnew.github.io/life><span>Life</span></a></li><li class=nav-about><a href=https://yzlnew.github.io/about><span>About</span></a></li></ul></nav></div></div></section><section class=icons><div class=container><div class=content><a href=//github.com/yzlnew target=_blank rel=noopener><img class=icon src=https://yzlnew.github.io/img/github.svg alt=github></a>
<a href=//t.me/r0brew target=_blank rel=noopener><img class=icon src=https://yzlnew.github.io/img/telegram.svg alt=telegram></a>
<a href=//instagram.com/yzlnew target=_blank rel=noopener><img class=icon src=https://yzlnew.github.io/img/instagram.svg alt=instagram></a>
<a href=mailto:yzlnew@gmail.com><img class=icon src=https://yzlnew.github.io/img/email.svg alt=email></a></div></div></section><section class="main post non-narrow zero-top-spacing"><div class=container><div class=content><div class=front-matter><div class=title-container><div class=page-heading>实现在 Vim 的正常和插入模式下中英文输入法的自动切换</div><div class=initials><a href=https://yzlnew.github.io/></a></div></div><div class=meta><div class=date title="Mon Jan 21 2019 21:53:58 &#43;0800">Jan 21, 2019</div><div class=reading-time><div class=middot></div>一分钟读完</div></div></div><div class=markdown><p>在使用 Vim 的过程中有一点一直很头疼，就是总是要在正常和插入模式下切换输入法，因
为大多时候是不会注意自己现在是中文还是英文的输入法。</p><div class="notices info">需求：在正常模式下，切换到英文；在插入模式下，切换到上一次的输入法。</div><p>直接上到目前为止（2019-01）的最佳实践，不写调研的过程了。( <strong>更新</strong> ：现在不是了)</p><h3 id=terminal-vim-on-mac>Terminal Vim on Mac</h3><ol><li>安装
<a href=https://github.com/CodeFalling/fcitx-remote-for-osx>fcitx-remote-for-osx</a>
。提供一个 <code>fcitx-remote</code> 可以通过命令行切换输入法的指令。</li><li>安装 <a href=https://github.com/CodeFalling/fcitx-vim-osx>fcitx-vim-osx</a> 这个 Vim 插件。</li></ol><div class="notices info">注意由于插件中用到 `InsertLeave` 动作，不支持 `CTRL-C` 退出插入模式。</div><h3 id=vscode-with-vim-mode>VScode with Vim mode</h3><p>VScode 的 Vim 模式虽然实际效果一般，但是给了比较好的输入法切换的解决方法。</p><ol><li>同样安装 <a href=https://github.com/daipeihust/im-select><code>im-select</code></a> 这个命令行工具。</li><li><p>再在配置文件中加上如下设定：</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
<span class=nt>&#34;vim.autoSwitchInputMethod.obtainIMCmd&#34;</span><span class=p>:</span> <span class=s2>&#34;/usr/local/bin/im-select&#34;</span><span class=p>,</span>
<span class=nt>&#34;vim.autoSwitchInputMethod.switchIMCmd&#34;</span><span class=p>:</span> <span class=s2>&#34;/usr/local/bin/im-select {im}&#34;</span><span class=p>,</span>
<span class=nt>&#34;vim.autoSwitchInputMethod.defaultIM&#34;</span><span class=p>:</span> <span class=s2>&#34;com.apple.keylayout.US&#34;</span><span class=p>,</span>
<span class=nt>&#34;vim.autoSwitchInputMethod.enable&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
<span class=p>}</span></code></pre></div></li></ol><h3 id=更新>更新</h3><p>在 <code>MacOS</code> 用以上方法会导致 <code>vimwiki</code> 每换行都切换输入法，几乎不可用。</p><p>如果仅仅在 <code>MacOS</code> 使用，建议使用
<a href=https://github.com/neoclide/coc-imselect><code>coc-imselect</code></a>。</p><br><div class=tags><strong>Tags:</strong>
<a href=https://yzlnew.github.io/tags/vim>Vim</a></div><br><p class=back-to-posts><a href=https://yzlnew.github.io/blog>回退</a></p></div><br><div class=disqus></div></div></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-61197619-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>