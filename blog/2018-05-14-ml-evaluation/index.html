<!DOCTYPE html>
<html lang="zh-CN">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Yellow Stone">
<meta name="description" content="在机器学习的模型评估中，选择合适的评价指标很重要。对于回归问题，常常使用一些损失函数，这在各个线上比赛、sklearn 的文档里都能看到。而对于分类或者标注问题，几种常见的指标比较容易混淆，这里简单总结一下。">

<meta property="og:title" content="分类器评价指标简析 - Accuracy, Precision, Recall, F1, ROC&amp;AUC" />
<meta property="og:description" content="在机器学习的模型评估中，选择合适的评价指标很重要。对于回归问题，常常使用一些损失函数，这在各个线上比赛、sklearn 的文档里都能看到。而对于分类或者标注问题，几种常见的指标比较容易混淆，这里简单总结一下。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yzlnew.github.io/blog/2018-05-14-ml-evaluation/" /><meta property="article:published_time" content="2018-05-14T17:18:11&#43;00:00"/>
<meta property="article:modified_time" content="2018-05-14T17:18:11&#43;00:00"/>


<title>


     分类器评价指标简析 - Accuracy, Precision, Recall, F1, ROC&amp;AUC 

</title>
<link rel="canonical" href="https://yzlnew.github.io/blog/2018-05-14-ml-evaluation/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/github.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://yzlnew.github.io/css/reset.css?t=2019-01-05%2013%3a30%3a21.070705544%20%2b0000%20UTC%20m%3d%2b0.034752987">
    <link rel="stylesheet" href="https://yzlnew.github.io/css/pygments.css?t=2019-01-05%2013%3a30%3a21.070705544%20%2b0000%20UTC%20m%3d%2b0.034752987">
    <link rel="stylesheet" href="https://yzlnew.github.io/css/main.css?t=2019-01-05%2013%3a30%3a21.070705544%20%2b0000%20UTC%20m%3d%2b0.034752987">
    
        <link rel="stylesheet" href="https://yzlnew.github.io/css/override.css?t=2019-01-05%2013%3a30%3a21.070705544%20%2b0000%20UTC%20m%3d%2b0.034752987">
    




<link rel="shortcut icon"

    href="https://yzlnew.github.io/img/favicon.ico"

>








</head>


<body lang="cn">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                
                <a href="https://yzlnew.github.io/"><img class="avatar" src="https://yzlnew.github.io/img/penrose.webp" srcset="https://yzlnew.github.io/img/penrose.webp 1x"></a>
            
            <a href="https://yzlnew.github.io/"><div class="name">Yellow Stone</div></a>
            
              <h3 class="self-intro">A Place of My Own</h3>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://yzlnew.github.io/blog"><span>Blog</span></a></li>
                    
                        <li class="nav-about"><a href="https://yzlnew.github.io/blog/about/"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/yzlnew" target="_blank" rel="noopener"><img class="icon" src="https://yzlnew.github.io/img/github.svg" alt="github" /></a>
        

        

        

	

        

        

        

        

        
            <a href="//t.me/r0brew" target="_blank" rel="noopener"><img class="icon" src="https://yzlnew.github.io/img/telegram.svg" alt="telegram" /></a>
        

        

        

        

        
            <a href="mailto:yzlnew@gmail.com"><img class="icon" src="https://yzlnew.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    分类器评价指标简析 - Accuracy, Precision, Recall, F1, ROC&amp;AUC

</div>

                    <div class="initials"><a href="https://yzlnew.github.io/"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Mon May 14 2018 17:18:11 UTC'>May 14, 2018</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>One minute read</div>
                    
                </div>
            </div>
            <div class="markdown">
                <p>在机器学习的模型评估中，选择合适的评价指标很重要。对于回归问题，常常使用一些损失函数，这在各个线上比赛、sklearn 的文档里都能看到。而对于分类或者标注问题，几种常见的指标比较容易混淆，这里简单总结一下。</p>

<h3 id="二分类的预测情况">二分类的预测情况</h3>

<table>
<thead>
<tr>
<th></th>
<th>预测为正类</th>
<th>预测为负类</th>
</tr>
</thead>

<tbody>
<tr>
<td>实际为正类</td>
<td>True Positive</td>
<td>False Negative</td>
</tr>

<tr>
<td>实际为负类</td>
<td>False Positive</td>
<td>True Negative</td>
</tr>
</tbody>
</table>

<p>记忆很简单，前面表示预测是正确（True）的还是错误（False）的，后面表示预测的是正类（Positive）还是负类（Negative），跟英文两组词的原意一致。</p>

<h3 id="准确率-精确率-召回率和-f1">准确率、精确率、召回率和 F1</h3>

<ul>
<li>准确率 Accuracy 即预测正确的样本数占总样本数之比，也就是 0-1 损失函数在测试集上的准确率</li>
<li>精确率 Precision 和召回 Recall，对应上表来说，分子都是 TP

<ul>
<li>Precision 是检索出相关文档数与检索出的文档总数的比率，衡量的是检索系统的<strong>查准率</strong>。对于二分类公式如下，即<strong>第一列</strong>中 TP 的占比，预测为正的样本中预测正确的占比。</li>
</ul></li>
</ul>

<p>$$P = \frac{TP}{TP+FP}$$</p>

<ul>
<li>Recall 是指检索出的相关文档数和文档库中所有的相关文档数的比率，衡量的是检索系统的<strong>查全率</strong>。对于二分类公式如下，即<strong>第一行</strong>中 TP 的占比，实际正类中预测正确的占比。</li>
</ul>

<p>$$R = \frac{TP}{TP+FN}$$</p>

<ul>
<li>F-Measure 是两者的加权调和平均，F1 即 alpha = 1</li>
</ul>

<p>$$F = \frac{(\alpha^2+1)P\cdot R}{\alpha^2(P+R)}$$</p>

<p>很显然一个好的分类器要最大化 P 和 R，但是两者有不可调和的矛盾时，F1 可以作为一个整体的指标。</p>

<p>然而这几个指标的局限也在于，并不关心分类器在负类上的表现（TN 没有出现过）。所以引出了 ROC 曲线和 AUC。</p>

<h3 id="roc-曲线和-auc">ROC 曲线和 AUC</h3>

<h4 id="tpr-和-fpr">TPR 和 FPR</h4>

<ul>
<li>真阳性率 True Positive Rate，在二分类下和 Recall 含义一致，表示<strong>第一行</strong>中的 TP 占比，表示所有正类中预测正确的比例</li>
</ul>

<p>$$TPR = \frac{TP}{TP+FN}$$</p>

<ul>
<li>假阳性率 False Positive Rate，弥补了前面指标对于 TN 关注不周的局限，即<strong>第二行</strong>的 FP 占比，表示所有负类中预测错误的比例</li>
</ul>

<p>$$FPR = \frac{FP}{FP+TN}$$</p>

<h4 id="roc-曲线">ROC 曲线</h4>

<p>由上面的两个指标，就能衡量分类器在正类和负类上的表现。而且 TPR 越大越好，FPR 越小越好。ROC（Receiver Operating Characteristic） 曲线就是用来表示两者在阈值变化的情况下的取值变化。</p>

<p><img src="http://o9gmysn8m.bkt.clouddn.com/20180514152630028191819.png" alt="" /></p>

<p>理解 ROC 曲线其实关键在于曲线是通过遍历所有的阈值得到的。而曲线越靠近左上角，分类器的整体性能越好。但是毕竟是不同的曲线，需要人为判定，为了方便机器判断，引入 AUC。</p>

<h4 id="auc">AUC</h4>

<p>AUC 即 Area Under Curve，即 ROC 曲线和 x 轴围成的面积，AUC 越大分类器效果越好。</p>

<ul>
<li>AUC = 1，是完美分类器，采用这个预测模型时，不管设定什么阈值都能得出完美预测。绝大多数预测的场合，不存在完美分类器。</li>
<li>0.5 &lt; AUC &lt; 1，优于随机猜测。这个分类器（模型）妥善设定阈值的话，能有预测价值。</li>
<li>AUC = 0.5，跟随机猜测一样（例：丢铜板），模型没有预测价值。</li>
<li>AUC &lt; 0.5，比随机猜测还差；但只要总是反预测而行，就优于随机猜测。</li>
</ul>

<div class="note info"><p>AUC 的物理意义：假设分类器的输出是样本属于正类的 socre（置信度），则 AUC 的物理意义为，任取一对（正、负）样本，正样本的 score 大于负样本的 score 的概率。</p></div> 

<p>参考资料：</p>

<ol>
<li>《统计学习方法》，李航</li>
<li><a href="http://www.cnblogs.com/maybe2030/p/5375175.html">http://www.cnblogs.com/maybe2030/p/5375175.html</a></li>
<li><a href="https://zh.wikipedia.org/zh/ROC%E6%9B%B2%E7%BA%BF">https://zh.wikipedia.org/zh/ROC曲线</a></li>
<li><a href="https://blog.argcv.com/articles/1036.c">https://blog.argcv.com/articles/1036.c</a></li>
</ol>
                <br>
                
                <p class="back-to-posts"><a href="https://yzlnew.github.io/blog">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>





  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>




<script type="text/javascript"
        async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>

</body>
</html>

